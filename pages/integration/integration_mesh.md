---
title: Integration to MESH
keywords: spine, mesh, integration
tags: [integration, spine, mesh]
sidebar: overview_sidebar
permalink: integration_mesh.html
summary: "Overview of the role of MESH in GP Connect messaging"
---

MESH is the strategic platform for asynchronous messaging in the NHS.

Viewed very simply, MESH is like a [post-restante](https://en.wikipedia.org/wiki/Poste_restante) service for electronic message delivery. Messages flow around the NHS using MESH as follows:

1. Sender creates message and sends to the MESH server
2. MESH server puts the message in the destination mailbox
3. Receiver retrieves the message from their inbox

For a more complete introduction to MESH, including details on how to get going if your organisation does not yet have MESH connectivity, see [MESH - Message Exchange for Health and Social Care]()

Message senders and receivers have two options when connecting to the central MESH server: MESH API, or the MESH client.



### Message Routing to Registered Practice ###

Where message senders create messages destined for a patient's registered practice, MESH message automated message routing SHOULD be used.

Automated message routing enables a message sender to send a message to the
MESH server without specifying a destination MESH mailbox ID. MESH takes care of routing the message to the mailbox of the patient's registered GP. This simplifies the task of message creation for the sending organisation.

Rather than specifying the destination mailbox ID, the message sender simply specifies the NHS Number, Surname and Date of Birth of the patient in the message header.

Refer to details below in the MESH API and MESH client for how to do this. 

TODO: Link out to MESH endpoint lookup service doco which contains error handling info.

### MESH API ###

The [MESH API](https://nhsconnect.github.io/spine-mesh/) is a simple REST HTTP API which enables message senders to send messages through MESH. Please refer to the [MESH API](https://nhsconnect.github.io/spine-mesh/) specification for details.

When using the MESH endpoint lookup service, the Mex-To HTTP header is populated according to following syntactic conventions.

`<GPPROVIDER>[delimiter]<Nhs No>[delimiter]<d.o.b>[delimiter]<Surname>`

The underscore `_` character is used as the delimeter.

Date of birth is specified in DDMMYYYY format.

For example, when sending a message about a patient Mr Brian Smith, born 14 February 2001, with NHS Number 12345678, the Mex_To field will have the following value:

`GPPROVIDER_12345678_14022001_Smith`


### MESH Client ###

The [MESH Client](https://digital.nhs.uk/services/message-exchange-for-social-care-and-health-mesh/technical-information-for-message-exchange-for-social-care-and-health-mesh) is an alternative means which organisations use to send and receive messages from the MESH central server infrastructure.

When using this automated means of message routing, the To_DTS field in the MESH message control (.ctl) file must be populated according to the same syntactic conventions described for the MESH API above.


### Workflow ID configuration ###

All messages which are sent to MESH specify a Workflow ID which identifies the workflow a particular data transfer is part of.

Each GP Connect Messaging use case will be associated with a single workflow ID which has been created use with messages generated by that use case only. 

Where the use case requires some form of ITK acknowledgement, an additional Workflow ID will be created to be used for acknowledgement messages generated for the use case.

Please refer to the applicable messaging use case details page for information on the Workflow ID to be used when generating particular messages. For example, when generating a message for the "Send a federated encounter summary" use case, please refer to [Send federated encounter summary](senddocument_fedcon_mesh.html)





